<img src="https://r2cdn.perplexity.ai/pplx-full-logo-primary-dark%402x.png" class="logo" width="120"/>

## 雲端環境中的公有與私有 IP 地址基礎知識

在雲端網路（如 Google Cloud VPC）中，理解公有與私有 IP 地址的分配與用途是基礎且重要的技能。以下整理相關重點，方便你學習與複習：

---

### 1. 子網路與 CIDR

- **VPC 由多個子網路（Subnet）組成**，每個子網都必須指定一個私有 IP CIDR 範圍。
- **CIDR（Classless Inter-Domain Routing）**：無類別域間路由，格式如 `10.0.0.0/16`。
    - `/16` 表示前 16 位是網路位址，剩下 16 位可分配給主機。
    - **IPV4 地址長度為 32 位**（4 個八位元組，每個 8 位）。
    - **CIDR 範圍決定可用 IP 數量**：
        - `/16`：2^(32-16) = 65,536 個 IP
        - 每增加 1，數量減半（如 `/17` 提供 32,768 個 IP）

---

### 2. 私有（內部）IP 地址

- **用途**：僅限 VPC 內部通訊，無法直接連到網際網路。
- **分配方式**：由 DHCP 服務自動分配給虛擬機（VM）。
    - 每 24 小時自動續約租約（lease）。
- **DNS 解析**：VM 的主機名稱（hostname）會自動與內部 IP 綁定，方便內部服務間溝通。
- **安全性**：內部 IP 不會暴露在網際網路上，提升安全性。

---

### 3. 公有（外部）IP 地址

- **用途**：可讓雲端資源直接與網際網路通訊。
- **分配方式**：
    - **臨時（Ephemeral）IP**：VM 啟動時自動分配，關機後會釋放。
    - **保留（Reserved）IP**：手動分配，可永久保留給特定資源。未綁定時仍需付費。
- **注意事項**：
    - VM 本身無法直接得知自己的公有 IP，只會顯示內部 IP。
    - 公有 IP 來自雲端平台管理的地址池。

---

### 4. 公有與私有 IP 的差異

| 項目 | 公有（外部）IP | 私有（內部）IP |
| :-- | :-- | :-- |
| 可否連網際網路 | 可以 | 不可以（僅限 VPC 內部通訊） |
| 分配方式 | 臨時/保留，需手動或自動分配 | 由 DHCP 自動分配 |
| 付費方式 | 保留型需付費，臨時型通常免費 | 不需額外付費 |
| 安全性 | 風險較高，需配合防火牆保護 | 安全性高，僅內部可存取 |
| 顯示於 VM 配置 | 不會顯示，只顯示內部 IP | 會顯示於作業系統網路設定中 |


---

### 5. 實用補充

- **子網路設計**：合理規劃 CIDR 範圍，避免 IP 浪費或重疊。
- **資源命名**：利用 DNS 服務，讓 VM 名稱自動對應內部 IP，便於管理。
- **安全建議**：盡量採用私有 IP 進行內部服務溝通，僅將必要的服務對外開放公有 IP。

---

這份筆記已條列重點、搭配表格與補充說明，適合直接上傳至 GitHub 作為雲端網路 IP 地址的複習資料。

